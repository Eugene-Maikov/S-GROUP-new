{"version":3,"file":"main.js","names":["document","addEventListener","burger","querySelector","menu","close","classList","add","body","remove","handleOption","el","target","closest","querySelectorAll","forEach","filter","overlay","contactsMobile","filterTabs","tab","locationBtn","locationOverlay","locationMobileBtn","locationModal","locationItems","toggle","item","innerHTML","phoneInputs","getInputsNumbersValue","input","value","replace","onPhoneInput","e","inputNumbersValue","formattedInputValue","selectionStart","length","data","test","indexOf","firstSymbols","substring","onPhoneKeyDown","keyCode","onPhonePaste","pasted","clipboardData","window","pastedText","getData","i","btn","modal","closeButton","player","getElementById","iframeSrc","src","evt","preventDefault","previewSrc","VID_REGEX","previewId","match","previewImg","imgSliderThumb","imgSlider","form","inputEmail","inputCheckbox","inputs","re","isEmailValid","String","toLowerCase","checked","submit","fileWrapper","Object","current_item","index","inputFile","fileList","textSelector","push","files","file","uploadFile","size","alert","textContent","name","dropZone","dropZoneText","maxFileSize","FileReader","ondragover","ondragleave","uploadDragFiles","dataTransfer","addClass"],"sources":["main.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  // --------------- Mobile menu ---------------\r\n  const burger = document.querySelector('.header__burger')\r\n  const menu = document.querySelector('.mobile-menu')\r\n  const close = document.querySelector('.mobile-menu__close')\r\n\r\n  burger.addEventListener(\"click\", () => {\r\n    menu.classList.add('active')\r\n    document.body.classList.add(\"no-scroll\")\r\n  })\r\n  close.addEventListener(\"click\", () => {\r\n    menu.classList.remove('active')\r\n    document.body.classList.remove(\"no-scroll\")\r\n  })\r\n\r\n\r\n  // --------------- Mobile menu / выпадающий список ---------------\r\n  // Выбор опций/сортировка\r\n  const handleOption = (el) => {\r\n    el = el.target;\r\n\r\n    // открытие списков\r\n    if (el.closest(\".linkHasChild\")) {\r\n      document.querySelectorAll(\".linkHasChild\").forEach(function (el) {\r\n        el.classList.remove(\"active\")\r\n      })\r\n      el.closest(\".linkHasChild\").classList.add(\"active\")\r\n    }\r\n  };\r\n  document.addEventListener(\"click\", handleOption);\r\n\r\n  // --------------- Выбор города ---------------\r\n  const filter = document.querySelector('.contacts__filter')\r\n  const overlay = document.querySelector('.contacts__overlay')\r\n  const contactsMobile = document.querySelectorAll('.contacts__mobile')\r\n  const filterTabs = document.querySelectorAll('.tabs__nav-item')\r\n\r\n  contactsMobile.forEach((tab) => {\r\n    tab.addEventListener(\"click\", () => {\r\n      filter.classList.add('visible-filter')\r\n      overlay.classList.add('visible-filter')\r\n      document.body.classList.add(\"no-scroll\")\r\n    })\r\n  })\r\n  filterTabs.forEach((tab) => {\r\n    tab.addEventListener(\"click\", () => {\r\n      filter.classList.remove('visible-filter')\r\n      overlay.classList.remove('visible-filter')\r\n      document.body.classList.remove(\"no-scroll\")\r\n    })\r\n  })\r\n\r\n  // --------------- Mobile menu / Выбор города ---------------\r\n  const locationBtn = document.querySelector('.location__button')\r\n  const locationOverlay = document.querySelector('.location__overlay')\r\n  const locationMobileBtn = document.querySelector('.mobile-menu__button')\r\n  const locationModal = document.querySelector('.location__modal')\r\n  const locationItems = document.querySelectorAll('.location__modal-item')\r\n\r\n  locationBtn.addEventListener(\"click\", () => {\r\n    locationModal.classList.toggle('visible-location')\r\n  })\r\n  locationMobileBtn.addEventListener(\"click\", () => {\r\n    locationModal.classList.toggle('visible-location')\r\n    locationOverlay.classList.toggle('visible-location-overlay')\r\n  })\r\n\r\n  locationItems.forEach((item) => {\r\n    item.addEventListener('click', () => {\r\n      locationBtn.innerHTML = item.innerHTML\r\n      locationMobileBtn.innerHTML = item.innerHTML\r\n      locationModal.classList.remove('visible-location')\r\n      locationOverlay.classList.remove('visible-location-overlay')\r\n    })\r\n  })\r\n\r\n  // --------------- Маска ввода номера телефона ---------------\r\n  let phoneInputs = document.querySelectorAll(\"input[data-tel-input]\");\r\n\r\n  let getInputsNumbersValue = function (input) {\r\n    return input.value.replace(/\\D/g, \"\");\r\n  };\r\n\r\n  // Обработка ввода\r\n  let onPhoneInput = function (e) {\r\n    let input = e.target;\r\n    let inputNumbersValue = getInputsNumbersValue(input);\r\n    let formattedInputValue = \"\";\r\n    let selectionStart = input.selectionStart;\r\n\r\n    if (!inputNumbersValue) {\r\n      return (input.value = \"\");\r\n    }\r\n\r\n    if (input.value.length !== selectionStart) {\r\n      if (e.data && /\\D/g.test(e.data)) {\r\n        input.value = inputNumbersValue;\r\n      }\r\n      return;\r\n    }\r\n\r\n    if ([\"7\", \"8\", \"9\"].indexOf(inputNumbersValue[0]) > -1) {\r\n      // Российский номер\r\n\r\n      if (inputNumbersValue[0] === \"9\") {\r\n        inputNumbersValue = \"7\" + inputNumbersValue;\r\n      }\r\n      let firstSymbols = inputNumbersValue[0] === \"8\" ? \"8\" : \"+7\";\r\n      formattedInputValue = firstSymbols + \" \";\r\n\r\n      //Форматирование\r\n      if (inputNumbersValue.length > 1) {\r\n        formattedInputValue += \"(\" + inputNumbersValue.substring(1, 4);\r\n      }\r\n      if (inputNumbersValue.length >= 5) {\r\n        formattedInputValue += \") \" + inputNumbersValue.substring(4, 7);\r\n      }\r\n      if (inputNumbersValue.length >= 8) {\r\n        formattedInputValue += \"-\" + inputNumbersValue.substring(7, 9);\r\n      }\r\n      if (inputNumbersValue.length >= 10) {\r\n        formattedInputValue += \"-\" + inputNumbersValue.substring(9, 11);\r\n      }\r\n    } else {\r\n      // Не российский номер\r\n      formattedInputValue = \"+\" + inputNumbersValue.substring(0, 16);\r\n    }\r\n\r\n    input.value = formattedInputValue;\r\n  };\r\n\r\n//  Удаление первой цифры\r\n  let onPhoneKeyDown = function (e) {\r\n    let input = e.target;\r\n    if (e.keyCode === 8 && getInputsNumbersValue(input).length === 1) {\r\n      input.value = \"\";\r\n    }\r\n    if (e.keyCode === \"-\") {\r\n      input.value = \"\";\r\n    }\r\n  };\r\n\r\n// Нельзя вставить букву из буфера обмена\r\n  let onPhonePaste = function (e) {\r\n    let pasted = e.clipboardData || window.clipboardData;\r\n    let input = e.target;\r\n    let inputNumbersValue = getInputsNumbersValue(input);\r\n\r\n    if (pasted) {\r\n      let pastedText = pasted.getData(\"Text\");\r\n\r\n      if (/\\D/g.test(pastedText)) {\r\n        input.value = inputNumbersValue;\r\n      }\r\n    }\r\n  };\r\n\r\n// Перебор полей с телефонами\r\n  for (let i = 0; i < phoneInputs.length; i++) {\r\n    let input = phoneInputs[i];\r\n    input.addEventListener(\"input\", onPhoneInput);\r\n    input.addEventListener(\"keydown\", onPhoneKeyDown);\r\n    input.addEventListener(\"paste\", onPhonePaste);\r\n  }\r\n\r\n  // Модальное окно для видео\r\n  const btn = document.querySelector('.js-watch-video');\r\n  const modal = document.querySelector(\".js-modal-video\");\r\n  const closeButton = document.querySelector(\".js-close\");\r\n\r\n  const player = document.getElementById('video-iframe');\r\n\r\n  if (player) {\r\n    const iframeSrc = player.src;\r\n\r\n    btn.addEventListener(\"click\", function (evt) {\r\n      evt.preventDefault();\r\n      modal.classList.add(\"active\");\r\n      locationOverlay.classList.add(\"visible-location-overlay\");\r\n      document.body.classList.add(\"no-scroll\");\r\n    });\r\n    closeButton.addEventListener(\"click\", function (evt) {\r\n      evt.preventDefault();\r\n      modal.classList.remove(\"active\");\r\n      locationOverlay.classList.remove(\"visible-location-overlay\");\r\n      document.body.classList.remove(\"no-scroll\");\r\n      player.src = iframeSrc;\r\n    });\r\n    modal.addEventListener(\"click\", function (evt) {\r\n      evt.preventDefault();\r\n      modal.classList.remove(\"active\");\r\n      locationOverlay.classList.remove(\"visible-location-overlay\");\r\n      document.body.classList.remove(\"no-scroll\");\r\n      player.src = iframeSrc;\r\n    });\r\n\r\n    // Превью видео\r\n    let previewSrc = document.getElementById('video-iframe').src\r\n    let VID_REGEX = /(?:youtube(?:-nocookie)?\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/\r\n    let previewId = previewSrc.match(VID_REGEX)[1]\r\n    let previewImg = `https://i.ytimg.com/vi/${previewId}/maxresdefault.jpg`\r\n\r\n    let imgSliderThumb = document.querySelector('.js-watch-video .swiper-slide__image img')\r\n    let imgSlider = document.querySelector('.js-preview-video .swiper-slide__image img')\r\n\r\n    imgSliderThumb.src = previewImg\r\n    imgSlider.src = previewImg\r\n\r\n  }\r\n\r\n\r\n  // ---------------Валидация---------------\r\n  const form = document.querySelector(\".form\");\r\n  const inputEmail = document.querySelector(\".js-input-email\");\r\n  const inputCheckbox = document.querySelector(\".js-input-checkbox\");\r\n  const inputs = document.querySelectorAll(\".validate\");\r\n\r\n  if (form) {\r\n    form.addEventListener('submit', (evt) => {\r\n\r\n      if (inputs){\r\n        //name, surname, phone\r\n        inputs.forEach((item) => {\r\n          if (item.value === \"\") {\r\n            item.classList.add(\"error\");\r\n            evt.preventDefault()\r\n          } else {\r\n            item.classList.remove(\"error\");\r\n          }\r\n        })\r\n      }\r\n\r\n      if (inputEmail) {\r\n        //email\r\n        const re =\r\n          /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/iu;\r\n        const isEmailValid = (value) => {\r\n          return re.test(String(value).toLowerCase());\r\n        }\r\n\r\n        if (!isEmailValid(inputEmail.value)) {\r\n          inputEmail.classList.add(\"error\");\r\n          evt.preventDefault()\r\n        } else {\r\n          inputEmail.classList.remove(\"error\");\r\n        }\r\n      }\r\n\r\n      if (inputCheckbox){\r\n        //checkbox\r\n        if (!inputCheckbox.checked) {\r\n          inputCheckbox.classList.add(\"error\");\r\n          evt.preventDefault()\r\n        } else {\r\n          inputCheckbox.classList.remove(\"error\");\r\n        }\r\n      }\r\n\r\n      if (!inputs.value === \"\" && inputCheckbox.checked && !inputEmail.value === \"\") {\r\n        form.submit()\r\n      }\r\n    })\r\n  }\r\n\r\n  // --------------- Кнопка «Прикрепить файл» ---------------\r\n  const fileWrapper = document.querySelectorAll(\".upload-file__wrapper\")\r\n\r\n  if (fileWrapper) {\r\n    for (let i = 1; i <= 4; i++) {\r\n      window[\"uploadDragFiles_\" + i] = new Object();\r\n    } // сюда будем помещать drug-&-drop файлы (4)\r\n\r\n    fileWrapper.forEach((current_item, index) => {\r\n\r\n      const inputFile = current_item.querySelector(\".upload-file__input\")\r\n\r\n      let fileList = [] // массив файлов\r\n\r\n      // --------------- Кнопка --------------\r\n      let textSelector = current_item.querySelector(\".upload-file__text\")\r\n\r\n      // Событие выбора файла(ов)\r\n      inputFile.addEventListener(\"change\", function () {\r\n        fileList.push(...inputFile.files);\r\n        // вызов функции для каждого файла\r\n        fileList.forEach(file => {\r\n          uploadFile(file);\r\n        });\r\n      });\r\n\r\n      // Проверяем размер файлов и выводим название\r\n      const uploadFile = (file) => {\r\n\r\n        // размер файла <5 Мб\r\n        if (file.size > 5 * 1024 * 1024) {\r\n          alert(\"Файл должен быть не более 5 МБ.\");\r\n          return;\r\n        }\r\n\r\n        // Показ загружаемых файлов\r\n        if (file && fileList.length > 1) {\r\n          if (fileList.length <= 4) {\r\n            textSelector.textContent = `Выбрано ${fileList.length} файла`;\r\n          } else {\r\n            textSelector.textContent = `Выбрано ${fileList.length} файлов`;\r\n          }\r\n        } else {\r\n          textSelector.textContent = file.name;\r\n        }\r\n        fileList = [];\r\n      }\r\n\r\n\r\n      // --------------- Загрузка файлов при помощи «Drag-and-drop» ---------------\r\n      const dropZone = current_item.querySelector(\".upload-file__label\");\r\n      const dropZoneText = current_item.querySelector(\".upload-file__text\");\r\n      const maxFileSize = 5000000; // максимальный размер файла - 5 мб.\r\n\r\n      // Проверка поддержки «Drag-and-drop»\r\n      if (typeof (window.FileReader) == \"undefined\") {\r\n        dropZone.textContent = \"Drag&Drop Не поддерживается браузером!\";\r\n        dropZone.classList.add(\"error\");\r\n      }\r\n      // Событие - перетаскивания файла\r\n      dropZone.ondragover = () => {\r\n        return false;\r\n      };\r\n      // Событие - отмена перетаскивания файла\r\n      dropZone.ondragleave = () => {\r\n        return false;\r\n      };\r\n      // Событие - файл перетащили\r\n      dropZone.addEventListener(\"drop\", function (e) {\r\n        e.preventDefault();\r\n\r\n        let uploadDragFiles = e.dataTransfer.files[0]; // один файл\r\n\r\n        // Проверка размера файла\r\n        if (uploadDragFiles.size > maxFileSize) {\r\n          dropZoneText.textContent = \"Размер превышает допустимое значение!\";\r\n          this.addClass(\"error\");\r\n          return false;\r\n        }\r\n\r\n        // Показ загружаемых файлов\r\n        if (uploadDragFiles.length > 1) {\r\n          if (uploadDragFiles.length <= 4) {\r\n            dropZoneText.textContent = `Выбрано ${uploadDragFiles.length} файла`;\r\n          } else {\r\n            dropZoneText.textContent = `Выбрано ${uploadDragFiles.length} файлов`;\r\n          }\r\n        } else {\r\n          dropZoneText.textContent = e.dataTransfer.files[0].name;\r\n        }\r\n\r\n        // добавляем файл в объект \"uploadDragFiles_i\"\r\n        window[\"uploadDragFiles_\" + index] = uploadDragFiles;\r\n      });\r\n\r\n    });\r\n  }\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"}