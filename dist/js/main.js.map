{"version":3,"file":"main.js","names":["document","addEventListener","delegate","el","target","header","querySelector","overlay","dropDownMenu","iconMenu","searchForm","searchInput","searchOptions","btn","closest","querySelectorAll","forEach","classList","remove","add","body","value","focus","toggle","innerText","contains","window","pageYOffset","mask","input","matrix","i","def","replace","val","length","a","test","charAt","number","getElementById","bind","handleSubmittingForm","form","span","formFooter","inputPhone","spanResult","preventDefault","closingPopup"],"sources":["main.js"],"sourcesContent":["\"use strict\";\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  const delegate = (el) => {\r\n    el = el.target;\r\n    const header = document.querySelector(\".header\");\r\n    const overlay = document.querySelector(\".overlay\");\r\n    const dropDownMenu = document.querySelector(\".header__dd-menu\"); // - обертка выпадающего меню;\r\n    const iconMenu = document.querySelector(\".header__mobile-menu\"); // - икнока бургера;\r\n    const searchForm = document.querySelector(\".header__search-from\"); // - форма поиска;\r\n    const searchInput = document.querySelector(\".js-search-input\"); // - инпут поиска;\r\n    const searchOptions = document.querySelector(\".search-suggestions\"); // - обертка вывода поисковых запросов;\r\n    const btn = document.querySelector(\".search-suggestions__btn\"); // - кнопка показать еще в форме поиска;\r\n\r\n    // open dropdown menu\r\n    if (el.closest(\".header__dd-item\") && !el.closest(\".header__dd-item.active\")) {\r\n      document.querySelectorAll(\".header__dd-item\").forEach((el) => {\r\n        el.classList.remove(\"active\");\r\n      });\r\n      el.closest(\".header__dd-item\").classList.add(\"active\");\r\n    } else if (el.closest(\".header__dd-item\") && !el.closest(\".header__dd-list\")) {\r\n      el.closest(\".header__dd-item\").classList.remove(\"active\");\r\n    }\r\n    if (!el.closest(\".header__dd-item\")) {\r\n      document.querySelectorAll(\".header__dd-item\").forEach((el) => {\r\n        el.classList.remove(\"active\");\r\n      });\r\n    }\r\n    if (el.closest(\".overlay\")) {\r\n      document.querySelector(\".header__dd-menu\").classList.remove(\"active\");\r\n      document.querySelector(\".overlay\").classList.remove(\"active\");\r\n      document.querySelector(\".header\").classList.remove(\"active\");\r\n      document.body.classList.remove(\"no-scroll\");\r\n      document.querySelector(\".header__mobile-menu\").classList.remove(\"active\");\r\n      searchForm.classList.remove(\"active\");\r\n      searchInput.value = \"\";\r\n    }\r\n\r\n    // open search form\r\n    if (el.closest(\".js-search\")) {\r\n      searchForm.classList.add(\"active\");\r\n      document.querySelector(\".overlay\").classList.add(\"active\");\r\n      document.querySelector(\".header__mobile-menu\").classList.remove(\"active\");\r\n      document.querySelector(\".header__dd-menu\").classList.remove(\"active\");\r\n      document.body.classList.remove(\"no-scroll\");\r\n      document.querySelector(\".header\").classList.remove(\"active\");\r\n    }\r\n\r\n    // clear search form\r\n    if (el.closest(\".close-btn-wrap\")) {\r\n      searchInput.value = \"\";\r\n      searchInput.focus();\r\n    }\r\n\r\n    // show more search options\r\n    if (el.closest(\".search-suggestions__show-more\")) {\r\n      searchOptions.classList.toggle(\"active\");\r\n      btn.innerText = btn.innerText === \"показать ещё +\" ? \"свернуть\" : \"показать ещё +\";\r\n    }\r\n\r\n    // burger menu\r\n    if (el.closest(\".header__mobile-wrap\")) {\r\n      dropDownMenu.classList.toggle(\"active\");\r\n      iconMenu.classList.toggle(\"active\");\r\n      header.classList.toggle(\"active\");\r\n      overlay.classList.toggle(\"active\");\r\n      document.body.classList.toggle(\"no-scroll\");\r\n    }\r\n\r\n    if (\r\n      document.querySelector(\".header__search-from\").classList.contains(\"active\") &&\r\n      el.closest(\".header__mobile-menu\")\r\n    ) {\r\n      document.querySelector(\".header__search-from\").classList.remove(\"active\");\r\n      document.querySelector(\".overlay\").classList.add(\"active\");\r\n    }\r\n  };\r\n  document.addEventListener(\"click\", delegate);\r\n\r\n  // fixed caps on scroll\r\n  window.addEventListener(\"scroll\", () => {\r\n    const header = document.querySelector(\".header\");\r\n\r\n    if (window.pageYOffset > 400) {\r\n      header.classList.add(\"_show\");\r\n    } else {\r\n      header.classList.remove(\"_show\");\r\n    }\r\n  });\r\n\r\n  // phone mask\r\n  const mask = (input) => {\r\n    let matrix = \"+7 (___) ___-__-__\",\r\n      i = 0,\r\n      def = matrix.replace(/\\D/g, \"\"),\r\n      val = input.value.replace(/\\D/g, \"\");\r\n    if (def.length >= val.length) val = def;\r\n    input.value = matrix.replace(/./g, function (a) {\r\n      return /[_\\d]/.test(a) && i < val.length ? val.charAt(i++) : i >= val.length ? \"\" : a;\r\n    });\r\n  };\r\n  let number = document.getElementById(\"footer-number\");\r\n\r\n  number.addEventListener(\"click\", () => {\r\n    number.addEventListener(\"input\", mask.bind(null, number), false);\r\n    number.addEventListener(\"focus\", mask.bind(null, number), false);\r\n    number.addEventListener(\"blur\", mask.bind(null, number), false);\r\n  });\r\n\r\n  // Submitting a form\r\n  const handleSubmittingForm = (form, input, span) => {\r\n    const formFooter = document.querySelector(form);\r\n    const inputPhone = document.querySelector(input);\r\n    const spanResult = document.querySelector(span);\r\n\r\n    formFooter.addEventListener(\"submit\", (el) => {\r\n      if (inputPhone.value === \"\") {\r\n        el.preventDefault();\r\n        inputPhone.classList.add(\"not-filled\");\r\n        spanResult.innerText = \"необходимо заполнить поле\";\r\n      } else if (inputPhone.value.length < 18) {\r\n        el.preventDefault();\r\n        inputPhone.classList.add(\"not-filled\");\r\n        spanResult.innerText = \"поле заполнено некорректно\";\r\n      } else {\r\n        inputPhone.classList.remove(\"not-filled\");\r\n        spanResult.innerText = \"\";\r\n      }\r\n    });\r\n  };\r\n  handleSubmittingForm(\".footer__form-feedback\", \".footer__form-input\", \".input-submiting\");\r\n\r\n  // Закрытие модальных окон\r\n  const closingPopup = (el) => {\r\n    el = el.target;\r\n    if (el.closest(\".close-popup\")) {\r\n      document.body.classList.remove(\"no-scroll\");\r\n      document.querySelector(\".overlay\").classList.remove(\"active\");\r\n      document.querySelector(\".popup\").classList.remove(\"active\");\r\n    }\r\n  };\r\n  document.addEventListener(\"click\", closingPopup);\r\n});\r\n"],"mappings":"AAAA;;AACAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;EAClD,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,EAAD,EAAQ;IACvBA,EAAE,GAAGA,EAAE,CAACC,MAAR;IACA,IAAMC,MAAM,GAAGL,QAAQ,CAACM,aAAT,CAAuB,SAAvB,CAAf;IACA,IAAMC,OAAO,GAAGP,QAAQ,CAACM,aAAT,CAAuB,UAAvB,CAAhB;IACA,IAAME,YAAY,GAAGR,QAAQ,CAACM,aAAT,CAAuB,kBAAvB,CAArB,CAJuB,CAI0C;;IACjE,IAAMG,QAAQ,GAAGT,QAAQ,CAACM,aAAT,CAAuB,sBAAvB,CAAjB,CALuB,CAK0C;;IACjE,IAAMI,UAAU,GAAGV,QAAQ,CAACM,aAAT,CAAuB,sBAAvB,CAAnB,CANuB,CAM4C;;IACnE,IAAMK,WAAW,GAAGX,QAAQ,CAACM,aAAT,CAAuB,kBAAvB,CAApB,CAPuB,CAOyC;;IAChE,IAAMM,aAAa,GAAGZ,QAAQ,CAACM,aAAT,CAAuB,qBAAvB,CAAtB,CARuB,CAQ8C;;IACrE,IAAMO,GAAG,GAAGb,QAAQ,CAACM,aAAT,CAAuB,0BAAvB,CAAZ,CATuB,CASyC;IAEhE;;IACA,IAAIH,EAAE,CAACW,OAAH,CAAW,kBAAX,KAAkC,CAACX,EAAE,CAACW,OAAH,CAAW,yBAAX,CAAvC,EAA8E;MAC5Ed,QAAQ,CAACe,gBAAT,CAA0B,kBAA1B,EAA8CC,OAA9C,CAAsD,UAACb,EAAD,EAAQ;QAC5DA,EAAE,CAACc,SAAH,CAAaC,MAAb,CAAoB,QAApB;MACD,CAFD;MAGAf,EAAE,CAACW,OAAH,CAAW,kBAAX,EAA+BG,SAA/B,CAAyCE,GAAzC,CAA6C,QAA7C;IACD,CALD,MAKO,IAAIhB,EAAE,CAACW,OAAH,CAAW,kBAAX,KAAkC,CAACX,EAAE,CAACW,OAAH,CAAW,kBAAX,CAAvC,EAAuE;MAC5EX,EAAE,CAACW,OAAH,CAAW,kBAAX,EAA+BG,SAA/B,CAAyCC,MAAzC,CAAgD,QAAhD;IACD;;IACD,IAAI,CAACf,EAAE,CAACW,OAAH,CAAW,kBAAX,CAAL,EAAqC;MACnCd,QAAQ,CAACe,gBAAT,CAA0B,kBAA1B,EAA8CC,OAA9C,CAAsD,UAACb,EAAD,EAAQ;QAC5DA,EAAE,CAACc,SAAH,CAAaC,MAAb,CAAoB,QAApB;MACD,CAFD;IAGD;;IACD,IAAIf,EAAE,CAACW,OAAH,CAAW,UAAX,CAAJ,EAA4B;MAC1Bd,QAAQ,CAACM,aAAT,CAAuB,kBAAvB,EAA2CW,SAA3C,CAAqDC,MAArD,CAA4D,QAA5D;MACAlB,QAAQ,CAACM,aAAT,CAAuB,UAAvB,EAAmCW,SAAnC,CAA6CC,MAA7C,CAAoD,QAApD;MACAlB,QAAQ,CAACM,aAAT,CAAuB,SAAvB,EAAkCW,SAAlC,CAA4CC,MAA5C,CAAmD,QAAnD;MACAlB,QAAQ,CAACoB,IAAT,CAAcH,SAAd,CAAwBC,MAAxB,CAA+B,WAA/B;MACAlB,QAAQ,CAACM,aAAT,CAAuB,sBAAvB,EAA+CW,SAA/C,CAAyDC,MAAzD,CAAgE,QAAhE;MACAR,UAAU,CAACO,SAAX,CAAqBC,MAArB,CAA4B,QAA5B;MACAP,WAAW,CAACU,KAAZ,GAAoB,EAApB;IACD,CAjCsB,CAmCvB;;;IACA,IAAIlB,EAAE,CAACW,OAAH,CAAW,YAAX,CAAJ,EAA8B;MAC5BJ,UAAU,CAACO,SAAX,CAAqBE,GAArB,CAAyB,QAAzB;MACAnB,QAAQ,CAACM,aAAT,CAAuB,UAAvB,EAAmCW,SAAnC,CAA6CE,GAA7C,CAAiD,QAAjD;MACAnB,QAAQ,CAACM,aAAT,CAAuB,sBAAvB,EAA+CW,SAA/C,CAAyDC,MAAzD,CAAgE,QAAhE;MACAlB,QAAQ,CAACM,aAAT,CAAuB,kBAAvB,EAA2CW,SAA3C,CAAqDC,MAArD,CAA4D,QAA5D;MACAlB,QAAQ,CAACoB,IAAT,CAAcH,SAAd,CAAwBC,MAAxB,CAA+B,WAA/B;MACAlB,QAAQ,CAACM,aAAT,CAAuB,SAAvB,EAAkCW,SAAlC,CAA4CC,MAA5C,CAAmD,QAAnD;IACD,CA3CsB,CA6CvB;;;IACA,IAAIf,EAAE,CAACW,OAAH,CAAW,iBAAX,CAAJ,EAAmC;MACjCH,WAAW,CAACU,KAAZ,GAAoB,EAApB;MACAV,WAAW,CAACW,KAAZ;IACD,CAjDsB,CAmDvB;;;IACA,IAAInB,EAAE,CAACW,OAAH,CAAW,gCAAX,CAAJ,EAAkD;MAChDF,aAAa,CAACK,SAAd,CAAwBM,MAAxB,CAA+B,QAA/B;MACAV,GAAG,CAACW,SAAJ,GAAgBX,GAAG,CAACW,SAAJ,KAAkB,gBAAlB,GAAqC,UAArC,GAAkD,gBAAlE;IACD,CAvDsB,CAyDvB;;;IACA,IAAIrB,EAAE,CAACW,OAAH,CAAW,sBAAX,CAAJ,EAAwC;MACtCN,YAAY,CAACS,SAAb,CAAuBM,MAAvB,CAA8B,QAA9B;MACAd,QAAQ,CAACQ,SAAT,CAAmBM,MAAnB,CAA0B,QAA1B;MACAlB,MAAM,CAACY,SAAP,CAAiBM,MAAjB,CAAwB,QAAxB;MACAhB,OAAO,CAACU,SAAR,CAAkBM,MAAlB,CAAyB,QAAzB;MACAvB,QAAQ,CAACoB,IAAT,CAAcH,SAAd,CAAwBM,MAAxB,CAA+B,WAA/B;IACD;;IAED,IACEvB,QAAQ,CAACM,aAAT,CAAuB,sBAAvB,EAA+CW,SAA/C,CAAyDQ,QAAzD,CAAkE,QAAlE,KACAtB,EAAE,CAACW,OAAH,CAAW,sBAAX,CAFF,EAGE;MACAd,QAAQ,CAACM,aAAT,CAAuB,sBAAvB,EAA+CW,SAA/C,CAAyDC,MAAzD,CAAgE,QAAhE;MACAlB,QAAQ,CAACM,aAAT,CAAuB,UAAvB,EAAmCW,SAAnC,CAA6CE,GAA7C,CAAiD,QAAjD;IACD;EACF,CAzED;;EA0EAnB,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmCC,QAAnC,EA3EkD,CA6ElD;;EACAwB,MAAM,CAACzB,gBAAP,CAAwB,QAAxB,EAAkC,YAAM;IACtC,IAAMI,MAAM,GAAGL,QAAQ,CAACM,aAAT,CAAuB,SAAvB,CAAf;;IAEA,IAAIoB,MAAM,CAACC,WAAP,GAAqB,GAAzB,EAA8B;MAC5BtB,MAAM,CAACY,SAAP,CAAiBE,GAAjB,CAAqB,OAArB;IACD,CAFD,MAEO;MACLd,MAAM,CAACY,SAAP,CAAiBC,MAAjB,CAAwB,OAAxB;IACD;EACF,CARD,EA9EkD,CAwFlD;;EACA,IAAMU,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAW;IACtB,IAAIC,MAAM,GAAG,oBAAb;IAAA,IACEC,CAAC,GAAG,CADN;IAAA,IAEEC,GAAG,GAAGF,MAAM,CAACG,OAAP,CAAe,KAAf,EAAsB,EAAtB,CAFR;IAAA,IAGEC,GAAG,GAAGL,KAAK,CAACR,KAAN,CAAYY,OAAZ,CAAoB,KAApB,EAA2B,EAA3B,CAHR;IAIA,IAAID,GAAG,CAACG,MAAJ,IAAcD,GAAG,CAACC,MAAtB,EAA8BD,GAAG,GAAGF,GAAN;IAC9BH,KAAK,CAACR,KAAN,GAAcS,MAAM,CAACG,OAAP,CAAe,IAAf,EAAqB,UAAUG,CAAV,EAAa;MAC9C,OAAO,QAAQC,IAAR,CAAaD,CAAb,KAAmBL,CAAC,GAAGG,GAAG,CAACC,MAA3B,GAAoCD,GAAG,CAACI,MAAJ,CAAWP,CAAC,EAAZ,CAApC,GAAsDA,CAAC,IAAIG,GAAG,CAACC,MAAT,GAAkB,EAAlB,GAAuBC,CAApF;IACD,CAFa,CAAd;EAGD,CATD;;EAUA,IAAIG,MAAM,GAAGvC,QAAQ,CAACwC,cAAT,CAAwB,eAAxB,CAAb;EAEAD,MAAM,CAACtC,gBAAP,CAAwB,OAAxB,EAAiC,YAAM;IACrCsC,MAAM,CAACtC,gBAAP,CAAwB,OAAxB,EAAiC2B,IAAI,CAACa,IAAL,CAAU,IAAV,EAAgBF,MAAhB,CAAjC,EAA0D,KAA1D;IACAA,MAAM,CAACtC,gBAAP,CAAwB,OAAxB,EAAiC2B,IAAI,CAACa,IAAL,CAAU,IAAV,EAAgBF,MAAhB,CAAjC,EAA0D,KAA1D;IACAA,MAAM,CAACtC,gBAAP,CAAwB,MAAxB,EAAgC2B,IAAI,CAACa,IAAL,CAAU,IAAV,EAAgBF,MAAhB,CAAhC,EAAyD,KAAzD;EACD,CAJD,EArGkD,CA2GlD;;EACA,IAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,IAAD,EAAOd,KAAP,EAAce,IAAd,EAAuB;IAClD,IAAMC,UAAU,GAAG7C,QAAQ,CAACM,aAAT,CAAuBqC,IAAvB,CAAnB;IACA,IAAMG,UAAU,GAAG9C,QAAQ,CAACM,aAAT,CAAuBuB,KAAvB,CAAnB;IACA,IAAMkB,UAAU,GAAG/C,QAAQ,CAACM,aAAT,CAAuBsC,IAAvB,CAAnB;IAEAC,UAAU,CAAC5C,gBAAX,CAA4B,QAA5B,EAAsC,UAACE,EAAD,EAAQ;MAC5C,IAAI2C,UAAU,CAACzB,KAAX,KAAqB,EAAzB,EAA6B;QAC3BlB,EAAE,CAAC6C,cAAH;QACAF,UAAU,CAAC7B,SAAX,CAAqBE,GAArB,CAAyB,YAAzB;QACA4B,UAAU,CAACvB,SAAX,GAAuB,2BAAvB;MACD,CAJD,MAIO,IAAIsB,UAAU,CAACzB,KAAX,CAAiBc,MAAjB,GAA0B,EAA9B,EAAkC;QACvChC,EAAE,CAAC6C,cAAH;QACAF,UAAU,CAAC7B,SAAX,CAAqBE,GAArB,CAAyB,YAAzB;QACA4B,UAAU,CAACvB,SAAX,GAAuB,4BAAvB;MACD,CAJM,MAIA;QACLsB,UAAU,CAAC7B,SAAX,CAAqBC,MAArB,CAA4B,YAA5B;QACA6B,UAAU,CAACvB,SAAX,GAAuB,EAAvB;MACD;IACF,CAbD;EAcD,CAnBD;;EAoBAkB,oBAAoB,CAAC,wBAAD,EAA2B,qBAA3B,EAAkD,kBAAlD,CAApB,CAhIkD,CAkIlD;;EACA,IAAMO,YAAY,GAAG,SAAfA,YAAe,CAAC9C,EAAD,EAAQ;IAC3BA,EAAE,GAAGA,EAAE,CAACC,MAAR;;IACA,IAAID,EAAE,CAACW,OAAH,CAAW,cAAX,CAAJ,EAAgC;MAC9Bd,QAAQ,CAACoB,IAAT,CAAcH,SAAd,CAAwBC,MAAxB,CAA+B,WAA/B;MACAlB,QAAQ,CAACM,aAAT,CAAuB,UAAvB,EAAmCW,SAAnC,CAA6CC,MAA7C,CAAoD,QAApD;MACAlB,QAAQ,CAACM,aAAT,CAAuB,QAAvB,EAAiCW,SAAjC,CAA2CC,MAA3C,CAAkD,QAAlD;IACD;EACF,CAPD;;EAQAlB,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmCgD,YAAnC;AACD,CA5ID"}