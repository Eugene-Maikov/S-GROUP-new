{"version":3,"file":"forms-work.js","names":["document","addEventListener","i","window","Object","querySelectorAll","forEach","current_item","index","inputFile","querySelector","fileList","textSelector","push","files","file","uploadFile","size","alert","length","textContent","name","dropZone","dropZoneText","maxFileSize","FileReader","classList","add","ondragover","ondragleave","remove","e","preventDefault","uploadDragFiles","dataTransfer","addClass"],"sources":["forms-work.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n\r\n  for (let i = 1; i <= 4; i++) { // сюда будем помещать drug-&-drop файлы (4)\r\n    window[\"uploadDragFiles_\"+i] = new Object();\r\n  }\r\n\r\n  document.querySelectorAll(\".upload-file__wrapper\").forEach( (current_item, index) => {\r\n\r\n    const inputFile = current_item.querySelector(\".upload-file__input\");\r\n\r\n    // создаём массив файлов\r\n    let fileList = [];\r\n\r\n    /////////// Кнопка «Прикрепить файл» ///////////\r\n    let textSelector = current_item.querySelector(\".upload-file__text\");\r\n\r\n    // Событие выбора файла(ов)\r\n    inputFile.addEventListener(\"change\", () => {\r\n      fileList.push(...inputFile.files);\r\n      // вызов функции для каждого файла\r\n      fileList.forEach(file => {\r\n        uploadFile(file);\r\n      });\r\n    });\r\n\r\n    // Проверяем размер файлов и выводим название\r\n    const uploadFile = (file) => {\r\n\r\n      // размер файла <5 Мб\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert(\"Файл должен быть не более 5 МБ.\");\r\n        return;\r\n      }\r\n\r\n      // Показ загружаемых файлов\r\n      if (file && fileList.length > 1) {\r\n        if (fileList.length <= 4) {\r\n          textSelector.textContent = `Выбрано ${fileList.length} файла`;\r\n        } else {\r\n          textSelector.textContent = `Выбрано ${fileList.length} файлов`;\r\n        }\r\n      } else {\r\n        textSelector.textContent = file.name;\r\n      }\r\n      fileList = [];\r\n    }\r\n\r\n\r\n    /////////// Загрузка файлов при помощи «Drag-and-drop» ///////////\r\n    // const dropZones = document.querySelectorAll(\".upload-file__label\");\r\n    const dropZone = current_item.querySelector(\".upload-file__label\");\r\n    const dropZoneText = current_item.querySelector(\".upload-file__text\");\r\n    const maxFileSize = 5000000; // максимальный размер файла - 5 мб.\r\n\r\n    // Проверка поддержки «Drag-and-drop»\r\n    if (typeof (window.FileReader) == \"undefined\") {\r\n      dropZone.textContent = \"Drag&Drop Не поддерживается браузером!\";\r\n      dropZone.classList.add(\"error\");\r\n    }\r\n    // Событие - перетаскивания файла\r\n    dropZone.ondragover = function () {\r\n      this.classList.add(\"hover\");\r\n      return false;\r\n    };\r\n    // Событие - отмена перетаскивания файла\r\n    dropZone.ondragleave = function () {\r\n      this.classList.remove(\"hover\");\r\n      return false;\r\n    };\r\n    // Событие - файл перетащили\r\n    dropZone.addEventListener(\"drop\", (e) => {\r\n      e.preventDefault();\r\n      this.classList.remove(\"hover\");\r\n      this.classList.add(\"drop\");\r\n\r\n      uploadDragFiles = e.dataTransfer.files[0]; // один файл\r\n\r\n      // Проверка размера файла\r\n      if (uploadDragFiles.size > maxFileSize) {\r\n        dropZoneText.textContent = \"Размер превышает допустимое значение!\";\r\n        this.addClass(\"error\");\r\n        return false;\r\n      }\r\n\r\n      // Показ загружаемых файлов\r\n      if (uploadDragFiles.length > 1) {\r\n        if (uploadDragFiles.length <= 4) {\r\n          dropZoneText.textContent = `Выбрано ${uploadDragFiles.length} файла`;\r\n        } else {\r\n          dropZoneText.textContent = `Выбрано ${uploadDragFiles.length} файлов`;\r\n        }\r\n      } else {\r\n        dropZoneText.textContent = e.dataTransfer.files[0].name;\r\n      }\r\n\r\n      // добавляем файл в объект \"uploadDragFiles_i\"\r\n      window[\"uploadDragFiles_\"+index] = uploadDragFiles;\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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"}